@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Lora:wght@500;700&family=Poppins:wght@400;600;700;800&family=Space+Grotesk:wght@400;600;700&display=swap');

:root {
  --primary: #6366f1;
  --secondary: #a855f7;
  --tertiary: #ec4899;
  --primary-gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--tertiary) 100%);
  --bg-dark: #0a0c14;
  --bg-alt: #141826;
  --card-bg: rgba(30, 41, 59, 0.7);
  --card-border: rgba(255, 255, 255, 0.1);
  --text-main: #f8fafc;
  --text-muted: #94a3b8;
  --accent: #f43f5e;
  --success: #10b981;
  --warning: #f59e0b;
  --font-main: 'Inter', system-ui, -apple-system, sans-serif;
  --glass-effect: blur(12px) saturate(180%);
  --soft-shadow: 0 20px 40px rgba(6, 8, 16, 0.4);
}

body[data-theme="sunrise"] { --bg-dark: #1b1020; --bg-alt: #2a1a2f; --card-bg: rgba(53, 30, 47, 0.72); }
body[data-theme="emerald"] { --bg-dark: #071711; --bg-alt: #0c241d; --card-bg: rgba(11, 47, 36, 0.72); }
body[data-theme="midnight"] { --bg-dark: #05070d; --bg-alt: #0d1223; --card-bg: rgba(16, 23, 47, 0.72); }

body[data-combo="ocean"] { --primary: #0ea5e9; --secondary: #06b6d4; --tertiary: #22d3ee; --accent: #14b8a6; }
body[data-combo="sunset"] { --primary: #f97316; --secondary: #f43f5e; --tertiary: #fb7185; --accent: #f59e0b; }
body[data-combo="forest"] { --primary: #10b981; --secondary: #34d399; --tertiary: #22c55e; --accent: #84cc16; }

body[data-font="poppins"] { --font-main: 'Poppins', system-ui, sans-serif; }
body[data-font="space"] { --font-main: 'Space Grotesk', system-ui, sans-serif; }
body[data-font="lora"] { --font-main: 'Lora', Georgia, serif; }

* { box-sizing: border-box; -webkit-font-smoothing: antialiased; }

body {
  margin: 0;
  background: radial-gradient(circle at top left, color-mix(in srgb, var(--primary) 30%, transparent), transparent 40%),
              radial-gradient(circle at top right, color-mix(in srgb, var(--secondary) 25%, transparent), transparent 45%),
              linear-gradient(145deg, var(--bg-dark), var(--bg-alt));
  background-attachment: fixed;
  color: var(--text-main);
  font-family: var(--font-main);
  line-height: 1.6;
  overflow-x: hidden;
}

main {
  max-width: 860px;
  margin: 0 auto;
  padding: 60px 20px;
  min-height: 100vh;
  position: relative;
}

h1 {
  font-size: clamp(2.5rem, 6vw, 3.8rem);
  font-weight: 900;
  text-align: center;
  margin-bottom: 0.5rem;
  background: var(--primary-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

h2 { margin-top: 0; }

.ambient-layer { position: absolute; inset: 0; pointer-events: none; overflow: hidden; }
.orb { position: absolute; border-radius: 50%; filter: blur(2px); opacity: 0.35; }
.orb-1 { width: 220px; height: 220px; background: var(--primary); top: 10%; left: -100px; animation: floatY 7s ease-in-out infinite; }
.orb-2 { width: 180px; height: 180px; background: var(--secondary); top: 45%; right: -70px; animation: floatY 9s ease-in-out infinite reverse; }
.orb-3 { width: 120px; height: 120px; background: var(--tertiary); bottom: 10%; left: 20%; animation: floatY 8s ease-in-out infinite; }

.hero-section { text-align: center; margin-bottom: 2rem; color: var(--text-muted); }
.hero-mascot { font-size: 3rem; animation: bob 2.4s ease-in-out infinite; }
.hero-pills { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-top: 16px; }
.hero-pills span { font-size: 0.72rem; text-transform: uppercase; letter-spacing: .06em; padding: 6px 10px; border-radius: 999px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.12); }

.hero-stats { display: grid; grid-template-columns: repeat(3, minmax(90px, 1fr)); gap: 10px; max-width: 420px; margin: 14px auto 0; }
.hero-stats div { border: 1px solid rgba(255,255,255,.1); background: rgba(255,255,255,.04); border-radius: 14px; padding: 10px; display: grid; gap: 2px; }
.hero-stats strong { font-size: 1rem; color: #fff; }
.hero-stats small { color: var(--text-muted); font-size: .72rem; letter-spacing: .04em; text-transform: uppercase; }

.card h2 { letter-spacing: .01em; }
.card section { isolation: isolate; }

.btn-primary-gradient:hover, .btn-primary:hover { transform: translateY(-1px); filter: brightness(1.05); }
.btn-secondary:hover { background: #475569; }
.btn-success:hover { filter: brightness(1.05); }

.result-actions { display: flex; gap: 10px; }

.question-card { position: relative; overflow: hidden; }
.question-card::before { content: ''; position: absolute; inset: 0; border-radius: inherit; padding: 1px; background: linear-gradient(135deg, color-mix(in srgb, var(--primary) 45%, transparent), transparent 40%); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; pointer-events: none; }
.question-body { display: grid; gap: 10px; }
.question-hint { margin: 12px 0 0; color: var(--text-muted); font-size: .85rem; border-top: 1px dashed rgba(255,255,255,.12); padding-top: 10px; }

.text-answer-input { width: 100%; min-height: 56px; }
.match-left { font-weight: 600; }

.score-card { position: relative; overflow: hidden; }
.trophy-banner { display: inline-flex; align-items: center; justify-content: center; border-radius: 999px; background: color-mix(in srgb, var(--warning) 20%, transparent); border: 1px solid color-mix(in srgb, var(--warning) 40%, transparent); padding: 6px 12px; margin-bottom: 12px; font-size: .8rem; font-weight: 700; letter-spacing: .04em; text-transform: uppercase; }
.score-card::after { content: 'âœ¦'; position: absolute; right: 20px; top: 16px; color: color-mix(in srgb, var(--primary) 70%, #fff); opacity: .35; font-size: 1.2rem; }

.review-list .card { margin-bottom: 14px; }

.debug-container details { border-radius: 12px; }

.card {
  border-radius: 24px;
  padding: 30px;
  margin-bottom: 20px;
  box-shadow: var(--soft-shadow);
  transition: transform .28s ease, box-shadow .28s ease, border-color .28s ease;
}
.card:hover { transform: translateY(-2px); }

.glass {
  background: var(--card-bg);
  backdrop-filter: var(--glass-effect);
  -webkit-backdrop-filter: var(--glass-effect);
  border: 1px solid var(--card-border);
}
body[data-card="solid"] .card { background: color-mix(in srgb, var(--bg-alt) 88%, #fff); border: 1px solid rgba(255,255,255,.06); backdrop-filter: none; }

.fade-in { animation: fadeIn .6s cubic-bezier(.16,1,.3,1); }
.animate-pulse { animation: pulse 1.9s ease infinite; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: .5; } }
@keyframes bob { 0%,100%{ transform: translateY(0);}50%{transform:translateY(-6px);} }
@keyframes floatY { 0%,100% { transform: translateY(0);}50%{ transform: translateY(-15px);} }

input, select, button {
  font-family: inherit;
  font-size: 1rem;
  padding: 13px 16px;
  border-radius: 12px;
  border: 1px solid var(--card-border);
  background: rgba(11, 16, 31, 0.8);
  color: #fff;
  transition: .2s ease;
  outline: none;
}
input:focus, select:focus { border-color: var(--primary); box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 30%, transparent); }
button { cursor: pointer; }

.btn-primary-gradient, .btn-primary {
  background: var(--primary-gradient);
  border: none;
  font-weight: 700;
  box-shadow: 0 10px 22px color-mix(in srgb, var(--primary) 40%, transparent);
}
.btn-secondary { background: #334155; border: none; font-weight: 600; }
.btn-success { background: var(--success); border: none; font-weight: 700; }

.drop-zone {
  border: 2px dashed rgba(255,255,255,.25);
  border-radius: 18px;
  padding: 48px 20px;
  text-align: center;
  cursor: pointer;
  margin-bottom: 1rem;
  transition: .25s ease;
  background: rgba(255,255,255,.02);
}
.drop-zone:hover, .drop-zone.drag-over { border-color: var(--primary); background: rgba(99, 102, 241, .08); transform: scale(1.01); }
.upload-icon { font-size: 2.2rem; opacity: .6; }

.file-list { list-style: none; padding: 0; margin: .5rem 0 0; }
.file-list li { background: rgba(0,0,0,.22); padding: 12px 16px; border-radius: 12px; margin-bottom: 8px; display: flex; justify-content: space-between; border: 1px solid rgba(255,255,255,.06); }

.options-grid, .settings-grid { display: grid; gap: 18px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); margin-bottom: 18px; }
.input-group { display: flex; flex-direction: column; gap: 8px; }
.input-group label { font-size: .78rem; font-weight: 700; color: var(--text-muted); letter-spacing: .08em; text-transform: uppercase; }

.count-btns { display: flex; gap: 8px; flex-wrap: wrap; }
.count-btn { background: rgba(255,255,255,.07); border: 1px solid transparent; }
.count-btn.active { background: var(--primary); border-color: var(--primary); }

.settings-panel { border: 1px solid color-mix(in srgb, var(--primary) 55%, #fff 10%); background: linear-gradient(165deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); }
.settings-subtitle { margin-top: -6px; color: var(--text-muted); }
.toggle-row { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,.05); border: 1px solid rgba(255,255,255,.08); padding: 12px 14px; border-radius: 12px; margin-bottom: 14px; }
.preview-strip { display: flex; gap: 8px; flex-wrap: wrap; }
.chip { font-size: .74rem; padding: 6px 10px; border-radius: 999px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.1); }

.q-progress { height: 10px; background: rgba(255,255,255,.08); border-radius: 999px; margin-bottom: 1.2rem; overflow: hidden; }
.q-progress-bar { height: 100%; background: var(--primary-gradient); transition: width .4s ease; }
.q-header { display: flex; justify-content: space-between; margin-bottom: 1rem; }
.q-badge, .q-type-badge { font-size: .75rem; font-weight: 700; letter-spacing: .04em; background: rgba(255,255,255,.09); padding: 6px 10px; border-radius: 999px; }
.q-type-badge { color: var(--primary); }

.question-prompt { font-size: clamp(1.15rem, 3vw, 1.5rem); font-weight: 700; margin-bottom: 1.5rem; }
.choice-label { display: flex; align-items: center; gap: 16px; padding: 16px; border-radius: 14px; margin-bottom: 12px; background: rgba(255,255,255,.03); border: 1px solid rgba(255,255,255,.08); transition: .2s ease; }
.choice-label:hover { transform: translateX(4px); background: rgba(255,255,255,.06); }
.choice-label.selected { border-color: var(--primary); background: color-mix(in srgb, var(--primary) 18%, transparent); }
.choice-label input { display: none; }
.choice-index { width: 34px; height: 34px; border-radius: 10px; background: rgba(255,255,255,.1); display: grid; place-items: center; font-weight: 700; }
.choice-label.selected .choice-index { background: var(--primary); }

.match-row { display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center; padding: 14px; border-radius: 14px; margin-bottom: 10px; }
.actions { display: flex; justify-content: space-between; gap: 10px; margin-top: 20px; }
.actions button { flex: 1; }

.score-display { position: relative; width: 200px; height: 200px; margin: 0 auto 1.5rem; }
.progress-ring { transform: rotate(-90deg); }
.progress-ring__circle { transition: stroke-dashoffset .8s ease; stroke-linecap: round; }
.score-text { position: absolute; inset: 0; display: grid; place-content: center; }
.score-percent { font-size: 3rem; font-weight: 900; line-height: 1; }
.score-fraction { color: var(--text-muted); text-align: center; }

.score-meta-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 14px; margin-bottom: 1.5rem; }
.meta-item { background: rgba(255,255,255,.04); border-radius: 14px; padding: 16px; text-align: center; }
.meta-label { font-size: .72rem; color: var(--text-muted); text-transform: uppercase; }
.meta-value { font-weight: 800; }

.result-card { border-left: 6px solid transparent; }
.correct-border { border-left-color: var(--success); }
.wrong-border { border-left-color: var(--accent); }
.result-header { display: flex; justify-content: space-between; }
.result-badge { font-size: .68rem; font-weight: 800; border-radius: 999px; padding: 5px 10px; }
.bg-success { background: rgba(16, 185, 129, .15); color: var(--success); }
.bg-danger { background: rgba(244, 63, 94, .15); color: var(--accent); }
.explanation-box { background: rgba(0,0,0,.2); border-radius: 12px; padding: 12px; margin-top: .7rem; }

.loading-overlay { position: fixed; inset: 0; background: radial-gradient(circle at top, var(--bg-alt), var(--bg-dark)); display: grid; place-content: center; gap: 12px; text-align: center; z-index: 1000; padding: 20px; }
.spinner { width: 70px; height: 70px; border: 6px solid rgba(255,255,255,.15); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin-inline: auto; }
.spinner-advanced { box-shadow: 0 0 30px color-mix(in srgb, var(--primary) 35%, transparent); }
.loading-dots { display: flex; justify-content: center; gap: 6px; }
.loading-dots span { width: 8px; height: 8px; border-radius: 50%; background: var(--primary); animation: blink 1.2s infinite; }
.loading-dots span:nth-child(2) { animation-delay: .2s; }
.loading-dots span:nth-child(3) { animation-delay: .4s; }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes blink { 0%,100% { opacity: .3; transform: translateY(0); } 50% { opacity: 1; transform: translateY(-3px); } }

body[data-animations="off"] * { animation: none !important; transition: none !important; }

@media (max-width: 640px) {
  .card { padding: 20px; }
  .actions { flex-direction: column; }
}
